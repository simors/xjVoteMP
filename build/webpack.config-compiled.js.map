{"version":3,"sources":["webpack.config.js"],"names":[],"mappings":"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","file":"webpack.config-compiled.js","sourcesContent":["const path = require('path')\nconst webpack = require('webpack')\nconst HtmlWebpackPlugin = require('html-webpack-plugin')\nconst ExtractTextPlugin = require('extract-text-webpack-plugin')\nconst project = require('../project.config')\nconst theme = require('../package.json').theme\n\nconst inProject = path.resolve.bind(path, project.basePath)\nconst inProjectSrc = (file) => inProject(project.srcDir, file)\n\nconst __DEV__ = project.env === 'development'\nconst __STAGE__ = project.env === 'stage'\nconst __TEST__ = project.env === 'test'\nconst __PROD__ = project.env === 'production'\n\nconst config = {\n  entry: {\n    normalize: [\n      inProjectSrc('normalize'),\n    ],\n    main: [\n      inProjectSrc(project.main),\n    ],\n  },\n  devtool: project.sourcemaps ? 'source-map' : false,\n  output: {\n    path: inProject(project.outDir),\n    filename: __DEV__ ? '[name].js' : '[name].[chunkhash].js',\n    publicPath: project.publicPath,\n  },\n  resolve: {\n    modules: [\n      inProject(project.srcDir),\n      'node_modules',\n    ],\n    extensions: ['*', '.web.js', '.web.jsx', '.js', '.jsx', '.json'],\n  },\n  externals: project.externals,\n  module: {\n    rules: [],\n  },\n  plugins: [\n    new webpack.DefinePlugin(Object.assign({\n      'process.env': { NODE_ENV: JSON.stringify(project.env) },\n      __DEV__,\n      __STAGE__,\n      __TEST__,\n      __PROD__,\n    }, project.globals))\n  ],\n}\n\n// JavaScript\n// ------------------------------------\nconfig.module.rules.push({\n  test: /\\.(js|jsx)$/,\n  exclude: /node_modules/,\n  use: [{\n    loader: 'babel-loader',\n    query: {\n      cacheDirectory: true,\n      plugins: [\n        'babel-plugin-transform-class-properties',\n        'babel-plugin-syntax-dynamic-import',\n        [\n          'babel-plugin-transform-runtime',\n          {\n            helpers: true,\n            polyfill: false, // we polyfill needed features in src/normalize.js\n            regenerator: true,\n          },\n        ],\n        [\n          'babel-plugin-transform-object-rest-spread',\n          {\n            useBuiltIns: true // we polyfill Object.assign in src/normalize.js\n          },\n        ],\n        ['import', { libraryName: 'antd-mobile', style: true }],\n      ],\n      presets: [\n        'babel-preset-react',\n        ['babel-preset-env', {\n          modules: false,\n          targets: {\n            ie9: true,\n          },\n          uglify: true,\n        }],\n      ]\n    },\n  }],\n})\n\n// Styles\n// ------------------------------------\nconst extractStyles = new ExtractTextPlugin({\n  filename: 'styles/[name].[contenthash].css',\n  allChunks: true,\n  disable: __DEV__,\n})\n\n// local style, with '.module.sass/scss/css' suffix\nconfig.module.rules.push({\n  test: /\\.module.(sass|scss|css)$/,\n  loader: extractStyles.extract({\n    fallback: 'style-loader',\n    use: [\n      {\n        loader: 'css-loader',\n        options: {\n          modules: true,\n          localIdentName: \"[name]__[local]___[hash:base64:5]\",\n          sourceMap: project.sourcemaps,\n          minimize: {\n            autoprefixer: {\n              add: true,\n              remove: true,\n              browsers: ['last 2 versions'],\n            },\n            discardComments: {\n              removeAll : true,\n            },\n            discardUnused: false,\n            mergeIdents: false,\n            reduceIdents: false,\n            safe: true,\n            sourcemap: project.sourcemaps,\n          },\n        },\n      },\n      {\n        loader: 'sass-loader',\n        options: {\n          sourceMap: project.sourcemaps,\n          includePaths: [\n            inProjectSrc('styles'),\n          ],\n        },\n      }\n    ],\n  })\n})\n\n// global style\nconfig.module.rules.push({\n  test: /^((?!\\.module).)*(sass|scss|css)$/,\n  loader: extractStyles.extract({\n    fallback: 'style-loader',\n    use: [\n      {\n        loader: 'css-loader',\n        options: {\n          sourceMap: project.sourcemaps,\n          minimize: {\n            autoprefixer: {\n              add: true,\n              remove: true,\n              browsers: ['last 2 versions'],\n            },\n            discardComments: {\n              removeAll : true,\n            },\n            discardUnused: false,\n            mergeIdents: false,\n            reduceIdents: false,\n            safe: true,\n            sourcemap: project.sourcemaps,\n          },\n        },\n      },\n      {\n        loader: 'sass-loader',\n        options: {\n          sourceMap: project.sourcemaps,\n          includePaths: [\n            inProjectSrc('styles'),\n          ],\n        },\n      }\n    ],\n  })\n})\n\n\n// less style\nconfig.module.rules.push({\n  test: /\\.less$/,\n  loader: extractStyles.extract({\n    fallback: 'style-loader',\n    use: [\n      {\n        loader: 'css-loader',\n        options: {\n          sourceMap: project.sourcemaps,\n          minimize: {\n            autoprefixer: {\n              add: true,\n              remove: true,\n              browsers: ['last 2 versions'],\n            },\n            discardComments: {\n              removeAll : true,\n            },\n            discardUnused: false,\n            mergeIdents: false,\n            reduceIdents: false,\n            safe: true,\n            sourcemap: project.sourcemaps,\n          },\n        },\n      },\n      {\n        loader: 'less-loader',\n        options: {\n          sourceMap: project.sourcemaps,\n          includePaths: [\n            inProjectSrc('styles'),\n          ],\n          modifyVars: theme,\n        },\n      }\n    ],\n  })\n})\n\n\nconfig.plugins.push(extractStyles)\n\n// Images\n// ------------------------------------\nconfig.module.rules.push({\n  test    : /\\.(png|jpg|gif)$/,\n  loader  : 'url-loader',\n  options : {\n    limit : 8192,\n  },\n})\n\n// Fonts\n// ------------------------------------\n;[\n  ['woff', 'application/font-woff'],\n  ['woff2', 'application/font-woff2'],\n  ['otf', 'font/opentype'],\n  ['ttf', 'application/octet-stream'],\n  ['eot', 'application/vnd.ms-fontobject'],\n  ['svg', 'image/svg+xml'],\n].forEach((font) => {\n  const extension = font[0]\n  const mimetype = font[1]\n\n  config.module.rules.push({\n    test    : new RegExp(`\\\\.${extension}$`),\n    loader  : 'url-loader',\n    options : {\n      name  : 'fonts/[name].[ext]',\n      limit : 10000,\n      mimetype,\n    },\n  })\n})\n\n// HTML Template\n// ------------------------------------\nconfig.plugins.push(new HtmlWebpackPlugin({\n  template: inProjectSrc('index.html'),\n  inject: true,\n  minify: {\n    collapseWhitespace: true,\n  },\n}))\n\n// Development Tools\n// ------------------------------------\nif (__DEV__) {\n  config.entry.main.push(\n    `webpack-hot-middleware/client.js?path=${config.output.publicPath}__webpack_hmr`\n  )\n  config.plugins.push(\n    new webpack.HotModuleReplacementPlugin(),\n    new webpack.NamedModulesPlugin()\n  )\n}\n\n// Bundle Splitting\n// ------------------------------------\nif (!__TEST__) {\n  const bundles = ['normalize', 'manifest']\n\n  if (project.vendors && project.vendors.length) {\n    bundles.unshift('vendor')\n    config.entry.vendor = project.vendors\n  }\n  config.plugins.push(new webpack.optimize.CommonsChunkPlugin({ names: bundles }))\n}\n\n// Production Optimizations\n// ------------------------------------\nif (__PROD__ || __STAGE__) {\n  config.plugins.push(\n    new webpack.LoaderOptionsPlugin({\n      minimize: true,\n      debug: false,\n    }),\n    new webpack.optimize.UglifyJsPlugin({\n      sourceMap: !!config.devtool,\n      comments: false,\n      compress: {\n        warnings: false,\n        screw_ie8: true,\n        conditionals: true,\n        unused: true,\n        comparisons: true,\n        sequences: true,\n        dead_code: true,\n        evaluate: true,\n        if_return: true,\n        join_vars: true,\n      },\n    })\n  )\n}\n\nmodule.exports = config\n"]}